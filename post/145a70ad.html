<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>vaultwarden-定时上传-Google-Driver | sam🌸小窝</title><meta name="author" content="sam🌸小窝"><meta name="copyright" content="sam🌸小窝"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="vaultwarden-定时上传-Google-Driver">
<meta property="og:type" content="article">
<meta property="og:title" content="vaultwarden-定时上传-Google-Driver">
<meta property="og:url" content="https://xx.6669998.xyz/post/145a70ad.html">
<meta property="og:site_name" content="sam🌸小窝">
<meta property="og:description" content="vaultwarden-定时上传-Google-Driver">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://tu.idcfq.com/imgs/2023/10/534b5589617cd93d.webp">
<meta property="article:published_time" content="2023-05-03T13:22:01.000Z">
<meta property="article:modified_time" content="2025-01-27T07:33:42.399Z">
<meta property="article:author" content="sam🌸小窝">
<meta property="article:tag" content="Linux">
<meta property="article:tag" content="docker">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://tu.idcfq.com/imgs/2023/10/534b5589617cd93d.webp"><link rel="shortcut icon" href="/img/star.png"><link rel="canonical" href="https://xx.6669998.xyz/post/145a70ad.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: sam🌸小窝","link":"链接: ","source":"来源: sam🌸小窝","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'vaultwarden-定时上传-Google-Driver',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-01-27 15:33:42'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css"><link rel="stylesheet" href="/css/rightMenu.css"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/animate.min.css" media="print" onload="this.media='screen'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://tu.idcfq.com/imgs/2024/02/5732d756934585ff.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">50</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">19</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">24</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首頁</span></a></div><div class="menus_item"><a class="site-page" href="javascript:toRandomPost()"><i class="fa-fw fa fas fa-bus"></i><span> 随便逛逛</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-tools"></i><span> 在线工具</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/tools/bese64/base64.html"><i class="fa-fw fa fa-toolbox"></i><span> base64</span></a></li><li><a class="site-page child" href="/tools/crontab/crontab.html"><i class="fa-fw fa fa-stopwatch"></i><span> Cron表达式生成器</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/images/"><i class="fa-fw fas fa-images"></i><span> 图床</span></a></div><div class="menus_item"><a class="site-page" href="/disk/"><i class="fa-fw fas fa-save"></i><span> 云盘</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 留言</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://tu.idcfq.com/imgs/2023/10/534b5589617cd93d.webp')"><nav id="nav"><span id="blog-info"><a href="/" title="sam🌸小窝"><span class="site-name">sam🌸小窝</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首頁</span></a></div><div class="menus_item"><a class="site-page" href="javascript:toRandomPost()"><i class="fa-fw fa fas fa-bus"></i><span> 随便逛逛</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-tools"></i><span> 在线工具</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/tools/bese64/base64.html"><i class="fa-fw fa fa-toolbox"></i><span> base64</span></a></li><li><a class="site-page child" href="/tools/crontab/crontab.html"><i class="fa-fw fa fa-stopwatch"></i><span> Cron表达式生成器</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/images/"><i class="fa-fw fas fa-images"></i><span> 图床</span></a></div><div class="menus_item"><a class="site-page" href="/disk/"><i class="fa-fw fas fa-save"></i><span> 云盘</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 留言</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">vaultwarden-定时上传-Google-Driver</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-05-03T13:22:01.000Z" title="发表于 2023-05-03 21:22:01">2023-05-03</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-01-27T07:33:42.399Z" title="更新于 2025-01-27 15:33:42">2025-01-27</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Docker/">Docker</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="vaultwarden-定时上传-Google-Driver"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="安装docker"><a href="#安装docker" class="headerlink" title="安装docker"></a>安装docker</h1><ul>
<li>参考：<a href="https://xx.6669998.xyz/post/4eb3381c.html">docer 笔记</a></li>
</ul>
<h2 id="拉取镜像"><a href="#拉取镜像" class="headerlink" title="拉取镜像"></a>拉取镜像</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">拉取镜像</span></span><br><span class="line">docker pull oceanxx/vaultwardes:latest</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">启动容器</span></span><br><span class="line">docker run -d --name vaultwarden \</span><br><span class="line"> -v /home/vaultwarden/:/data/ \</span><br><span class="line"> -e ADMIN_TOKEN=xxxxxx \</span><br><span class="line"> --restart=always \</span><br><span class="line"> -p 5108:80 \  </span><br><span class="line">oceanxx/vaultwardes:latest</span><br></pre></td></tr></table></figure>

<ul>
<li>修改版作者镜像地址</li>
<li><a target="_blank" rel="noopener" href="https://github.com/dani-garcia/vaultwarden">github 项目地址</a></li>
</ul>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull vaultwarden/server:latest</span><br></pre></td></tr></table></figure>

<h2 id="命令说明"><a href="#命令说明" class="headerlink" title="命令说明"></a>命令说明</h2><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-e ADMIN_TOKEN=xxxxxx \  <span class="comment"># 管理者 在域名后面 /admin 进入管理页面</span></span><br><span class="line">-e SIGNUPS_ALLOWED=false <span class="comment">#开启注册，自己注册后改成false</span></span><br><span class="line">-e SIGNUPS_DOMAINS_WHITELIST=gmail.com,qq.com <span class="comment">#将注册限制为某些电子邮件域名</span></span><br><span class="line">-e SIGNUPS_VERIFY=true <span class="comment">#要求新注册的用户在成功登录前进行电子邮件验证</span></span><br><span class="line">-e INVITATIONS_ALLOWED=false <span class="comment">#禁止邀请用户</span></span><br><span class="line">-e SHOW_PASSWORD_HINT=false <span class="comment">#关闭密码提示</span></span><br><span class="line">-p xxx:<span class="number">80</span> \  <span class="comment">#前面位自定义端口</span></span><br></pre></td></tr></table></figure>



<h1 id="反代域名并开启https-：nginx-caddy-二选一"><a href="#反代域名并开启https-：nginx-caddy-二选一" class="headerlink" title="反代域名并开启https ：nginx  caddy 二选一"></a>反代域名并开启https ：nginx  caddy 二选一</h1><h2 id="nginx"><a href="#nginx" class="headerlink" title="nginx"></a>nginx</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># debian</span></span></span><br><span class="line">apt install nginx</span><br></pre></td></tr></table></figure>

<h3 id="设置开机启动"><a href="#设置开机启动" class="headerlink" title="设置开机启动"></a>设置开机启动</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable nginx</span><br></pre></td></tr></table></figure>

<h3 id="启动服务"><a href="#启动服务" class="headerlink" title="启动服务"></a>启动服务</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start nginx</span><br></pre></td></tr></table></figure>

<h3 id="停止服务"><a href="#停止服务" class="headerlink" title="停止服务"></a>停止服务</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart nginx</span><br></pre></td></tr></table></figure>

<h3 id="重新加载"><a href="#重新加载" class="headerlink" title="重新加载"></a>重新加载</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl reload nginx</span><br></pre></td></tr></table></figure>

<ul>
<li>修改&#x2F;etc&#x2F;nginx&#x2F;nginx.conf，添加如下：</li>
</ul>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># http</span></span><br><span class="line">    <span class="section">server</span> &#123;</span><br><span class="line">        <span class="attribute">listen</span>       <span class="number">80</span>;</span><br><span class="line">        <span class="attribute">listen</span>  [::]:<span class="number">80</span>;</span><br><span class="line">        <span class="attribute">server_name</span>  bitwarden.example.com; <span class="comment">##域名</span></span><br><span class="line">       <span class="comment">##防止搜索引擎收录</span></span><br><span class="line">       <span class="attribute">if</span> (<span class="variable">$http_user_agent</span> <span class="regexp">~* &quot;qihoobot|Baiduspider|Googlebot|Googlebot-Mobile|Googlebot-Image|Mediapartners-Google|Adsbot-Google|Feedfetcher-Google|Yahoo!</span> Slurp|Yahoo! Slurp China|YoudaoBot|Sosospider|Sogou spider|Sogou web spider|MSNBot|ia_archiver|Tomato Bot|^$<span class="string">&quot;) &#123;  </span></span><br><span class="line"><span class="string">        return 404;</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        location / &#123; # 访问80端口后的所有路径都转发到 proxy_pass 配置的ip中</span></span><br><span class="line"><span class="string">            root   /usr/share/nginx/html;</span></span><br><span class="line"><span class="string">            index  index.html index.htm;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">##如果使用cf加速就换成302</span></span><br><span class="line"><span class="string">         return 301 https://bitwarden.example.com; ##域名</span></span><br><span class="line"><span class="string">            </span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># https</span></span><br><span class="line"><span class="string"> server &#123;</span></span><br><span class="line"><span class="string">        listen       443 ssl http2;</span></span><br><span class="line"><span class="string">        listen  [::]:443 ssl http2;</span></span><br><span class="line"><span class="string">        server_name  bitwarden.example.com; ##域名</span></span><br><span class="line"><span class="string">           if (<span class="variable">$http_user_agent</span> ~* &quot;</span>qihoobot|Baiduspider|Googlebot|Googlebot-Mobile|Googlebot-Image|Mediapartners-Google|Adsbot-Google|Feedfetcher-Google|Yahoo! Slurp|Yahoo! Slurp China|YoudaoBot|Sosospider|Sogou spider|Sogou web spider|MSNBot|ia_archiver|Tomato Bot|^$<span class="string">&quot;) &#123;  </span></span><br><span class="line"><span class="string">        return 404;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        #启用HSTS    </span></span><br><span class="line"><span class="string">    add_header Strict-Transport-Security &quot;</span>max-age=<span class="number">31536000</span>; includeSubDomains&quot; always; </span><br><span class="line"></span><br><span class="line">        <span class="attribute">ssl_certificate</span> /path/to/ssl/cert;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">ssl_certificate_key</span> /path/to/cert/key;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">keepalive_timeout</span>   <span class="number">70</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment"># OCSP stapling</span></span><br><span class="line">        <span class="attribute">ssl_stapling</span>        <span class="literal">on</span>;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">ssl_stapling_verify</span> <span class="literal">on</span>;</span><br><span class="line"><span class="comment">##填入你机器的DNS</span></span><br><span class="line">        <span class="attribute">resolver</span> <span class="number">8.8.8.8</span>;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">ssl_protocols</span> TLSv1 TLSv1.<span class="number">1</span> TLSv1.<span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">             <span class="section">location</span> / &#123;</span><br><span class="line">             <span class="attribute">root</span>   /usr/share/nginx/html;</span><br><span class="line"><span class="comment">#            index  index.html index.htm;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">               <span class="attribute">proxy_set_header</span> Host <span class="variable">$host</span>;</span><br><span class="line"></span><br><span class="line">               <span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line"></span><br><span class="line">               <span class="attribute">proxy_set_header</span> X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line"></span><br><span class="line">               <span class="attribute">proxy_set_header</span> X-Forwarded-Proto <span class="variable">$scheme</span>;</span><br><span class="line"></span><br><span class="line">               <span class="attribute">proxy_set_header</span> X-Forwarded-Port <span class="variable">$server_port</span>;</span><br><span class="line"></span><br><span class="line">               <span class="attribute">proxy_pass</span> http://localhost:xxxx; <span class="comment">##端口</span></span><br><span class="line">              </span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h3 id="保存并退出，重启nginx："><a href="#保存并退出，重启nginx：" class="headerlink" title="保存并退出，重启nginx："></a>保存并退出，重启nginx：</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart nginx</span><br></pre></td></tr></table></figure>

<h3 id="检查nginx-是否正确："><a href="#检查nginx-是否正确：" class="headerlink" title="检查nginx 是否正确："></a>检查nginx 是否正确：</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx -t</span><br></pre></td></tr></table></figure>

<p> <img src="https://cdn.jsdelivr.net/gh/oceanxux/imgs/image-20230503222248605.png"></p>
<h2 id="caddy"><a href="#caddy" class="headerlink" title="caddy"></a>caddy</h2><h3 id="安装caddy"><a href="#安装caddy" class="headerlink" title="安装caddy"></a>安装caddy</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;deb [trusted=yes] https://apt.fury.io/caddy/ /&quot; | sudo tee -a /etc/apt/sources.list.d/caddy-fury.list</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update &amp;&amp; sudo apt install caddy</span><br></pre></td></tr></table></figure>

<h3 id="设置反代端口"><a href="#设置反代端口" class="headerlink" title="设置反代端口"></a>设置反代端口</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">xxxx.com &#123;</span><br><span class="line">    reverse_proxy 127.0.0.1:端口</span><br><span class="line">    tls your_email@example.com# 邮箱  这个可以不用</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>设置完打开你的IP 如图就可以了</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/oceanxux/imgs/image-20230503222341477.png"></p>
<h3 id="注册"><a href="#注册" class="headerlink" title="注册"></a>注册</h3><p><img src="https://cdn.jsdelivr.net/gh/oceanxux/imgs/image-20230503223406849.png"></p>
<ul>
<li>如何注册详细的 百度即可</li>
</ul>
<h1 id="关闭注册"><a href="#关闭注册" class="headerlink" title="关闭注册"></a>关闭注册</h1><ul>
<li>需要删除原本镜像 然后选好命令说明里面所需的 重新输入docker 命令</li>
<li>然后选命令说明里面的需要关闭的</li>
<li>一般是关闭注册，具体需要什么 命令说明里面选择</li>
<li>举个例子如下：</li>
</ul>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="keyword">run</span><span class="language-bash"> -d --name vaultwarden \</span></span><br><span class="line"><span class="language-bash"> -v /home/vaultwarden/:/data/ \</span></span><br><span class="line"><span class="language-bash"> -e ADMIN_TOKEN=xxxxxx \ <span class="comment">#管理密码 域名/admin打开</span></span></span><br><span class="line"> -e SIGNUPS_ALLOWED=false <span class="comment">#开启注册，自己注册后改成false</span></span><br><span class="line"> --restart=always \</span><br><span class="line"> -p xxx:<span class="number">80</span> \     <span class="comment"># 端口:80 前面自定义 要跟nginx caddy 一样哦</span></span><br><span class="line">oceanxx/vaultwardes:latest</span><br></pre></td></tr></table></figure>

<h2 id="小贴士"><a href="#小贴士" class="headerlink" title="小贴士"></a>小贴士</h2><ul>
<li>去谷歌插件里面添加插件到游览器</li>
</ul>
<figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://chrome.google.com/webstore/detail/bitwarden-free-password-m/nngceckbapebfimnlniiiahkandclblb</span><br></pre></td></tr></table></figure>

<p><img src="https://tu.idcfq.com/imgs/2024/02/c5145cabc3345f3f.jpg"></p>
<h1 id="配置定时自动上传"><a href="#配置定时自动上传" class="headerlink" title="配置定时自动上传"></a>配置定时自动上传</h1><h2 id="谷歌云盘"><a href="#谷歌云盘" class="headerlink" title="谷歌云盘"></a>谷歌云盘</h2><ul>
<li><a target="_blank" rel="noopener" href="https://console.cloud.google.com/apis/library?project=">打开 google api地址 </a></li>
</ul>
<p><img src="https://image.6669998.xyz/hSHrph.png" alt="1723432009164.png"><br><img src="https://image.6669998.xyz/8I3scP.png" alt="1723432021534.png"><br><img src="https://image.6669998.xyz/UYjCie.png" alt="1723432032364.png"></p>
<ul>
<li>OAuth 同意屏幕 配置教程，如已配置好 忽略本图即可(如果看不清楚可以放大)</li>
</ul>
<p><img src="https://image.6669998.xyz/JHx87r.png" alt="1723432060315.png"></p>
<ul>
<li>我们创建好 OAuth 客户端ID 后点击我们刚刚创建的 OAuth 客户端ID 随便写~ 进去后有 客户端ID 和 客户端秘钥</li>
</ul>
<p><img src="https://image.6669998.xyz/MN2MX4.png" alt="1723432071487.png"></p>
<h3 id="安装rclone"><a href="#安装rclone" class="headerlink" title="安装rclone"></a>安装rclone</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl https://rclone.org/install.sh | sudo bash</span><br></pre></td></tr></table></figure>

<h3 id="新建挂载"><a href="#新建挂载" class="headerlink" title="新建挂载"></a>新建挂载</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br></pre></td><td class="code"><pre><span class="line">#配置webdav</span><br><span class="line">rclone config</span><br><span class="line">#新建</span><br><span class="line">No remotes found - make a new one</span><br><span class="line">n) New remote</span><br><span class="line">s) Set configuration password</span><br><span class="line">q) Quit config</span><br><span class="line">n/s/q&gt; n</span><br><span class="line"></span><br><span class="line">name&gt; googledrive</span><br><span class="line"></span><br><span class="line">Option Storage.</span><br><span class="line">Type of storage to configure.</span><br><span class="line">Choose a number from below, or type in your own value.</span><br><span class="line"> 1 / 1Fichier</span><br><span class="line">   \ (fichier)</span><br><span class="line"> 2 / Akamai NetStorage</span><br><span class="line">   \ (netstorage)</span><br><span class="line"> 3 / Alias for an existing remote</span><br><span class="line">   \ (alias)</span><br><span class="line"> 4 / Amazon Drive</span><br><span class="line">   \ (amazon cloud drive)</span><br><span class="line"> 5 / Amazon S3 Compliant Storage Providers including AWS, Alibaba, Ceph, China Mobile, Cloudflare, ArvanCloud, DigitalOcean, Dreamhost, Huawei OBS, IBM COS, IDrive e2, IONOS Cloud, Liara, Lyve Cloud, Minio, Netease, RackCorp, Scaleway, SeaweedFS, StackPath, Storj, Tencent COS, Qiniu and Wasabi</span><br><span class="line">   \ (s3)</span><br><span class="line"> 6 / Backblaze B2</span><br><span class="line">   \ (b2)</span><br><span class="line"> 7 / Better checksums for other remotes</span><br><span class="line">   \ (hasher)</span><br><span class="line"> 8 / Box</span><br><span class="line">   \ (box)</span><br><span class="line"> 9 / Cache a remote</span><br><span class="line">   \ (cache)</span><br><span class="line">10 / Citrix Sharefile</span><br><span class="line">   \ (sharefile)</span><br><span class="line">11 / Combine several remotes into one</span><br><span class="line">   \ (combine)</span><br><span class="line">12 / Compress a remote</span><br><span class="line">   \ (compress)</span><br><span class="line">13 / Dropbox</span><br><span class="line">   \ (dropbox)</span><br><span class="line">14 / Encrypt/Decrypt a remote</span><br><span class="line">   \ (crypt)</span><br><span class="line">15 / Enterprise File Fabric</span><br><span class="line">   \ (filefabric)</span><br><span class="line">16 / FTP</span><br><span class="line">   \ (ftp)</span><br><span class="line">17 / Google Cloud Storage (this is not Google Drive)</span><br><span class="line">   \ (google cloud storage)</span><br><span class="line">18 / Google Drive</span><br><span class="line">   \ (drive)</span><br><span class="line">19 / Google Photos</span><br><span class="line">   \ (google photos)</span><br><span class="line">20 / HTTP</span><br><span class="line">   \ (http)</span><br><span class="line">21 / Hadoop distributed file system</span><br><span class="line">   \ (hdfs)</span><br><span class="line">22 / HiDrive</span><br><span class="line">   \ (hidrive)</span><br><span class="line">23 / In memory object storage system.</span><br><span class="line">   \ (memory)</span><br><span class="line">24 / Internet Archive</span><br><span class="line">   \ (internetarchive)</span><br><span class="line">25 / Jottacloud</span><br><span class="line">   \ (jottacloud)</span><br><span class="line">26 / Koofr, Digi Storage and other Koofr-compatible storage providers</span><br><span class="line">   \ (koofr)</span><br><span class="line">27 / Local Disk</span><br><span class="line">   \ (local)</span><br><span class="line">28 / Mail.ru Cloud</span><br><span class="line">   \ (mailru)</span><br><span class="line">29 / Mega</span><br><span class="line">   \ (mega)</span><br><span class="line">30 / Microsoft Azure Blob Storage</span><br><span class="line">   \ (azureblob)</span><br><span class="line">31 / Microsoft OneDrive</span><br><span class="line">   \ (onedrive)</span><br><span class="line">32 / OpenDrive</span><br><span class="line">   \ (opendrive)</span><br><span class="line">33 / OpenStack Swift (Rackspace Cloud Files, Memset Memstore, OVH)</span><br><span class="line">   \ (swift)</span><br><span class="line">34 / Oracle Cloud Infrastructure Object Storage</span><br><span class="line">   \ (oracleobjectstorage)</span><br><span class="line">35 / Pcloud</span><br><span class="line">   \ (pcloud)</span><br><span class="line">36 / Put.io</span><br><span class="line">   \ (putio)</span><br><span class="line">37 / QingCloud Object Storage</span><br><span class="line">   \ (qingstor)</span><br><span class="line">38 / SMB / CIFS</span><br><span class="line">   \ (smb)</span><br><span class="line">39 / SSH/SFTP</span><br><span class="line">   \ (sftp)</span><br><span class="line">40 / Sia Decentralized Cloud</span><br><span class="line">   \ (sia)</span><br><span class="line">41 / Storj Decentralized Cloud Storage</span><br><span class="line">   \ (storj)</span><br><span class="line">42 / Sugarsync</span><br><span class="line">   \ (sugarsync)</span><br><span class="line">43 / Transparently chunk/split large files</span><br><span class="line">   \ (chunker)</span><br><span class="line">44 / Union merges the contents of several upstream fs</span><br><span class="line">   \ (union)</span><br><span class="line">45 / Uptobox</span><br><span class="line">   \ (uptobox)</span><br><span class="line">46 / WebDAV</span><br><span class="line">   \ (webdav)</span><br><span class="line">47 / Yandex Disk</span><br><span class="line">   \ (yandex)</span><br><span class="line">48 / Zoho</span><br><span class="line">   \ (zoho)</span><br><span class="line">49 / premiumize.me</span><br><span class="line">   \ (premiumizeme)</span><br><span class="line">50 / seafile</span><br><span class="line">   \ (seafile)</span><br><span class="line">Storage&gt; 18</span><br><span class="line"></span><br><span class="line">Option client_id.</span><br><span class="line">Google Application Client Id</span><br><span class="line">Setting your own is recommended.</span><br><span class="line">See https://rclone.org/drive/#making-your-own-client-id for how to create your own.</span><br><span class="line">If you leave this blank, it will use an internal key which is low performance.</span><br><span class="line">Enter a value. Press Enter to leave empty.</span><br><span class="line">client_id&gt; 你在google 申请的 Client_ID</span><br><span class="line"></span><br><span class="line">Option client_secret.</span><br><span class="line">OAuth Client Secret.</span><br><span class="line">Leave blank normally.</span><br><span class="line">Enter a value. Press Enter to leave empty.</span><br><span class="line">client_secret&gt; 你在google 申请的 Client_secre</span><br><span class="line"></span><br><span class="line">Option scope.</span><br><span class="line">Scope that rclone should use when requesting access from drive.</span><br><span class="line">Choose a number from below, or type in your own value.</span><br><span class="line">Press Enter to leave empty.</span><br><span class="line"> 1 / Full access all files, excluding Application Data Folder.</span><br><span class="line">   \ (drive)</span><br><span class="line"> 2 / Read-only access to file metadata and file contents.</span><br><span class="line">   \ (drive.readonly)</span><br><span class="line">   / Access to files created by rclone only.</span><br><span class="line"> 3 | These are visible in the drive website.</span><br><span class="line">   | File authorization is revoked when the user deauthorizes the app.</span><br><span class="line">   \ (drive.file)</span><br><span class="line">   / Allows read and write access to the Application Data folder.</span><br><span class="line"> 4 | This is not visible in the drive website.</span><br><span class="line">   \ (drive.appfolder)</span><br><span class="line">   / Allows read-only access to file metadata but</span><br><span class="line"> 5 | does not allow any access to read or download file content.</span><br><span class="line">   \ (drive.metadata.readonly)</span><br><span class="line">scope&gt; 1</span><br><span class="line"></span><br><span class="line">Option service_account_file.</span><br><span class="line">Service Account Credentials JSON file path.</span><br><span class="line">Leave blank normally.</span><br><span class="line">Needed only if you want use SA instead of interactive login.</span><br><span class="line">Leading `~` will be expanded in the file name as will environment variables such as `$&#123;RCLONE_CONFIG_DIR&#125;`.</span><br><span class="line">Enter a value. Press Enter to leave empty.</span><br><span class="line">service_account_file&gt; </span><br><span class="line"></span><br><span class="line">Edit advanced config?</span><br><span class="line">y) Yes</span><br><span class="line">n) No (default)</span><br><span class="line">y/n&gt; n</span><br><span class="line"></span><br><span class="line">Use web browser to automatically authenticate rclone with remote?</span><br><span class="line"> * Say Y if the machine running rclone has a web browser you can use</span><br><span class="line"> * Say N if running rclone on a (remote) machine without web browser access</span><br><span class="line">If not sure try Y. If Y failed, try N.</span><br><span class="line"></span><br><span class="line">y) Yes (default)</span><br><span class="line">n) No</span><br><span class="line">y/n&gt; n</span><br><span class="line">Option config_token.</span><br><span class="line">For this to work, you will need rclone available on a machine that has</span><br><span class="line">a web browser available.</span><br><span class="line">For more help and alternate methods see: https://rclone.org/remote_setup/</span><br><span class="line">Execute the following on the machine with the web browser (same rclone</span><br><span class="line">version recommended):</span><br><span class="line">    rclone authorize &quot;drive&quot; &quot;XXXXXXXXXXXXXXXXXX&quot;</span><br><span class="line">Then paste the result.</span><br><span class="line">Enter a value.</span><br><span class="line">config_token&gt; xxxxxxxxxxxxxxxxxxxxx</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Configure this as a Shared Drive (Team Drive)?</span><br><span class="line"></span><br><span class="line">y) Yes</span><br><span class="line">n) No (default)</span><br><span class="line">y/n&gt; n  # 是否为团队盘 选否</span><br><span class="line"></span><br><span class="line">    ## 检查配置是否正确</span><br><span class="line">Configuration complete.</span><br><span class="line">Options:</span><br><span class="line">- type: drive</span><br><span class="line">- client_id: xxxxxxxxxxxxxxxxx</span><br><span class="line">- client_secret: xxxxxxxxxxxxxxxxx</span><br><span class="line">- scope: drive</span><br><span class="line">- token: &#123;&quot;access_token&quot;:&quot;xxxxxxxxxxxxxxxxxx&quot;,&quot;expiry&quot;:&quot;2024-02-15T21:18:39.5036298+08:00&quot;&#125;</span><br><span class="line">- team_drive: </span><br><span class="line">Keep this &quot;googledrive&quot; remote?</span><br><span class="line">y) Yes this is OK (default)</span><br><span class="line">e) Edit this remote</span><br><span class="line">d) Delete this remote</span><br><span class="line">y/e/d&gt; </span><br><span class="line"></span><br><span class="line">Current remotes:</span><br><span class="line"></span><br><span class="line">Name                 Type</span><br><span class="line">====                 ====</span><br><span class="line">googledrive               drive</span><br><span class="line"></span><br><span class="line">e) Edit existing remote</span><br><span class="line">n) New remote</span><br><span class="line">d) Delete remote</span><br><span class="line">r) Rename remote</span><br><span class="line">c) Copy remote</span><br><span class="line">s) Set configuration password</span><br><span class="line">q) Quit config</span><br><span class="line">e/n/d/r/c/s/q&gt; q</span><br></pre></td></tr></table></figure>

<h3 id="因为新版谷歌改变了规则-所以需要自己去下载一个rclone-到本地安装"><a href="#因为新版谷歌改变了规则-所以需要自己去下载一个rclone-到本地安装" class="headerlink" title="因为新版谷歌改变了规则 所以需要自己去下载一个rclone 到本地安装"></a>因为新版谷歌改变了规则 所以需要自己去下载一个rclone 到本地安装</h3><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://rclone.org/downloads/</span><br></pre></td></tr></table></figure>

<h3 id="打开自己的电脑终端，进入到此目录后执行"><a href="#打开自己的电脑终端，进入到此目录后执行" class="headerlink" title="打开自己的电脑终端，进入到此目录后执行"></a>打开自己的电脑终端，进入到此目录后执行</h3><ul>
<li>替换以下命令中的Client_ID、Client_secret 并执行</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rclone authorize “drive” &quot;Client_ID&quot; &quot;Client_secret&quot; #CMD中运行此命令</span><br><span class="line">./rclone authorize &quot;drive&quot; &quot;Client_ID&quot; &quot;Client_secret&quot; #mac 系统下</span><br><span class="line">.\/rclone.exe authorize &quot;drive&quot; &quot;Client_ID&quot; &quot;Client_secret&quot; #PowerShell中运行此命令</span><br></pre></td></tr></table></figure>

<p><img src="https://image.6669998.xyz/V3ScJu.png"></p>
<h3 id="授权成功会提示如下："><a href="#授权成功会提示如下：" class="headerlink" title="授权成功会提示如下："></a>授权成功会提示如下：</h3><ul>
<li>网页</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/oceanxux/imgs/image-20230503225718542.png"></p>
<ul>
<li>CMD窗口</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">If your browser doesn&#x27;t open automatically go to the following link: http://127.0.0.1:53682/auth</span><br><span class="line">Log in and authorize rclone for access</span><br><span class="line">Waiting for code...</span><br><span class="line">Got code</span><br><span class="line">Paste the following into your remote machine ---&gt;</span><br><span class="line">&#123;&quot;access_token&quot;:&quot;xxxxxxxxxxxxxxxxxx&quot;,&quot;expiry&quot;:&quot;2024-02-15T21:18:39.5036298+08:00&quot;&#125;</span><br><span class="line">&lt;---End paste</span><br></pre></td></tr></table></figure>

<ul>
<li>{“access_token”:”xxxxxxxxxxxxxxxxxx”,”expiry”:”2024-02-15T21:18:39.5036298+08:00”}这段全部内容（包括括号）是token，复制并保存。 </li>
<li>然后，将token粘贴到刚才上面要求输入 config_token&gt; 的地方</li>
</ul>
<h3 id="如果失败-可能是网络问题（windows-cmd-没办法走代理）"><a href="#如果失败-可能是网络问题（windows-cmd-没办法走代理）" class="headerlink" title="如果失败 可能是网络问题（windows cmd 没办法走代理）"></a>如果失败 可能是网络问题（windows cmd 没办法走代理）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## socks5</span></span><br><span class="line"><span class="built_in">set</span> http_proxy=socks5://127.0.0.1:1080</span><br><span class="line"><span class="built_in">set</span> https_proxy=socks5://127.0.0.1:1080</span><br><span class="line"><span class="comment">## http</span></span><br><span class="line"><span class="built_in">set</span> http_proxy=http://127.0.0.1:1080</span><br><span class="line"><span class="built_in">set</span> https_proxy=http://127.0.0.1:1080</span><br><span class="line"><span class="comment">## 或者直接一起</span></span><br><span class="line"><span class="built_in">set</span> http_proxy=http://127.0.0.1:10809 &amp; <span class="built_in">set</span> https_proxy=http://127.0.0.1:10809</span><br></pre></td></tr></table></figure>

<h3 id="复制授权-code，输入到-rclone-中、接下来-rclone-会询问是否为团队盘"><a href="#复制授权-code，输入到-rclone-中、接下来-rclone-会询问是否为团队盘" class="headerlink" title="复制授权 code，输入到 rclone 中、接下来 rclone 会询问是否为团队盘"></a>复制授权 code，输入到 rclone 中、接下来 rclone 会询问是否为团队盘</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Configure this as a Shared Drive (Team Drive)?</span><br><span class="line"> </span><br><span class="line">y) Yes</span><br><span class="line">n) No (default)</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">##团队盘就选Y 个人 N</span></span></span><br></pre></td></tr></table></figure>

<h3 id="此时配置就已经结束了，退出-clone，开始挂载。"><a href="#此时配置就已经结束了，退出-clone，开始挂载。" class="headerlink" title="此时配置就已经结束了，退出 clone，开始挂载。"></a>此时配置就已经结束了，退出 clone，开始挂载。</h3><h2 id="挂载-Google-Drive"><a href="#挂载-Google-Drive" class="headerlink" title="挂载 Google Drive"></a>挂载 Google Drive</h2><h3 id="首先新建一个文件夹用于挂载："><a href="#首先新建一个文件夹用于挂载：" class="headerlink" title="首先新建一个文件夹用于挂载："></a>首先新建一个文件夹用于挂载：</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir home/googledrive</span><br></pre></td></tr></table></figure>

<h1 id="开始挂载（两种挂载方法-我选的第一-）"><a href="#开始挂载（两种挂载方法-我选的第一-）" class="headerlink" title="开始挂载（两种挂载方法 我选的第一 ）"></a>开始挂载（两种挂载方法 我选的第一 ）</h1><h2 id="挂载1"><a href="#挂载1" class="headerlink" title="挂载1"></a>挂载1</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">挂载</span></span><br><span class="line">rclone mount &lt;网盘名称:网盘路径&gt; &lt;本地路径&gt; [参数] --daemon</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">取消挂载</span></span><br><span class="line">fusermount -qzu &lt;本地路径&gt;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">#示例</span></span></span><br><span class="line">rclone mount googledrive: /home/googledrive --allow-other --allow-non-empty --vfs-cache-mode writes --daemon</span><br></pre></td></tr></table></figure>

<h3 id="报错以下可能是没安装fuse3"><a href="#报错以下可能是没安装fuse3" class="headerlink" title="报错以下可能是没安装fuse3"></a>报错以下可能是没安装fuse3</h3><ul>
<li>Fatal error: failed to mount FUSE fs: fusermount: exec: “fusermount3”: executable file not found in $PATH</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install fuse3</span><br></pre></td></tr></table></figure>

<h3 id="完整配置如下"><a href="#完整配置如下" class="headerlink" title="完整配置如下"></a>完整配置如下</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[googledrive]</span><br><span class="line">type = drive</span><br><span class="line">client_id = xxxx.apps.googleusercontent.com</span><br><span class="line">client_secret = GOCSPX-xxxx</span><br><span class="line">scope = drive</span><br><span class="line">token = &#123;&quot;access_token&quot;:&quot;xxxxxxxx2023-1x-0xT02:27:14.30030132-05:00&quot;&#125;</span><br><span class="line">team_drive = </span><br></pre></td></tr></table></figure>

<h2 id="挂载-2"><a href="#挂载-2" class="headerlink" title="挂载 2"></a>挂载 2</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">rclone mount &lt;配置的云盘名称&gt;:&lt;要挂载的云盘目录&gt; &lt;作为挂载点的本地目录&gt; \</span><br><span class="line">  --umask 0000 \</span><br><span class="line">  --default-permissions \</span><br><span class="line">  --allow-non-empty \</span><br><span class="line">  --allow-other \</span><br><span class="line">  --attr-timeout 5m \</span><br><span class="line">  --transfers 4 \</span><br><span class="line">  --buffer-size 32M \</span><br><span class="line">  --low-level-retries 200 \</span><br><span class="line">  --vfs-read-chunk-size 32M \</span><br><span class="line">  --vfs-read-chunk-size-limit 128M \</span><br><span class="line">  --vfs-cache-mode full \</span><br><span class="line">  --vfs-cache-max-age 24h \</span><br><span class="line">  --vfs-cache-max-size 10G \</span><br><span class="line">  --daemon</span><br></pre></td></tr></table></figure>

<p>  注释：</p>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left">–allow-other</td>
<td align="left">允许非当前rclone用户外其它用户进行访问</td>
</tr>
<tr>
<td align="left">–attr-timeout 5m</td>
<td align="left">文件属性缓存，（大小，修改时间等）的时间。如果VPS</td>
</tr>
<tr>
<td align="left">–vfs-cache-mode full</td>
<td align="left">开启VFS文件缓存，可减少rclone与API交互，同时可提高文件读写效率</td>
</tr>
<tr>
<td align="left">–vfs-cache-max-age 24h</td>
<td align="left">VFS文件缓存时间，这里设置24小时，如果文件很少更改，建议设置更长时间</td>
</tr>
<tr>
<td align="left">–vfs-cache-max-size 10G</td>
<td align="left">VFS文件缓存上限大小，请根据服务器剩余磁盘自行调节</td>
</tr>
<tr>
<td align="left">–vfs-read-chunk-size-limit 100M</td>
<td align="left">分块读取大小，这里设置的是100M，可提高文件读的效率，比如1G的文件，大致分为10个块进行读取，但与此同时API请求次数也会增多</td>
</tr>
<tr>
<td align="left">–buffer-size 32M</td>
<td align="left">该参数为读取每个文件时的内存缓冲区大小，控制rclone上传和挂载的时候的内存占用，调低点可以防止内存占用过高而崩溃，但太低可能会影响部分文件的传输速度，请根据服务器内存大小自行设置</td>
</tr>
<tr>
<td align="left">–low-level-retries</td>
<td align="left">该参数为传输文件没速度的时候重试次数，没速度的时候，单个会自动睡眠10ms起，然后再重试，不行，再睡眠更长一段时间，再重试，这样可以稍微加快文件上传进度</td>
</tr>
<tr>
<td align="left">–transfers</td>
<td align="left">该参数控制最大同时传输任务数量，如果你cpu性能差，建议调低，但太低可能会影响多个文件同时传输的速度</td>
</tr>
<tr>
<td align="left">–daemon</td>
<td align="left">后台运行程序</td>
</tr>
</tbody></table>
<h2 id="然后输入-df-h-命令"><a href="#然后输入-df-h-命令" class="headerlink" title="然后输入 df -h 命令"></a>然后输入 <code>df -h</code> 命令</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看挂载情况</span></span><br><span class="line">df -h</span><br></pre></td></tr></table></figure>

<ul>
<li>失败请安装这个</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Debian/Ubantu</span></span><br><span class="line">apt-get update &amp;&amp; apt-get install -y fuse</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">CentOS</span></span><br><span class="line">yum install -y fuse</span><br></pre></td></tr></table></figure>

<h1 id="开机自动挂载-1-或者-2-选择"><a href="#开机自动挂载-1-或者-2-选择" class="headerlink" title="开机自动挂载 1 或者 2 选择"></a>开机自动挂载 1 或者 2 选择</h1><h2 id="下载并编辑自启脚本"><a href="#下载并编辑自启脚本" class="headerlink" title="下载并编辑自启脚本"></a>下载并编辑自启脚本</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -N git.io/rcloned &amp;&amp; nano rcloned</span><br></pre></td></tr></table></figure>

<h2 id="修改内容："><a href="#修改内容：" class="headerlink" title="修改内容："></a>修改内容：</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">NAME=&quot;googledrive&quot; #Rclone配置时填写的name</span><br><span class="line">REMOTE=&#x27;/bitwarden_backup&#x27;  #远程文件夹，网盘里的挂载的一个文件夹，留空为整个网盘</span><br><span class="line">LOCAL=&#x27;/home/googledrive&#x27;  #挂载地址，VPS本地挂载目录</span><br></pre></td></tr></table></figure>

<h2 id="设置开机自启"><a href="#设置开机自启" class="headerlink" title="设置开机自启"></a>设置开机自启</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mv rcloned /etc/init.d/rcloned</span><br><span class="line">chmod +x /etc/init.d/rcloned</span><br><span class="line"><span class="meta prompt_"> </span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Debian/Ubuntu</span></span><br><span class="line">update-rc.d -f rcloned defaults</span><br><span class="line"><span class="meta prompt_"> </span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">CentOS</span></span><br><span class="line">chkconfig rcloned on</span><br><span class="line">bash /etc/init.d/rcloned start</span><br></pre></td></tr></table></figure>

<h2 id="管理"><a href="#管理" class="headerlink" title="管理"></a>管理</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">开始挂载</span></span><br><span class="line">bash /etc/init.d/rcloned start</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">停止挂载</span></span><br><span class="line">bash /etc/init.d/rcloned stop</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">重新挂载</span></span><br><span class="line">bash /etc/init.d/rcloned restart</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看日志</span></span><br><span class="line">tail -f /$HOME/.rclone/rcloned.log</span><br></pre></td></tr></table></figure>

<h2 id="卸载自动挂载"><a href="#卸载自动挂载" class="headerlink" title="卸载自动挂载"></a>卸载自动挂载</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">bash /etc/init.d/rcloned stop</span><br><span class="line"> </span><br><span class="line"># Debian/Ubuntu</span><br><span class="line">update-rc.d -f rcloned remove</span><br><span class="line"> </span><br><span class="line"># CentOS</span><br><span class="line">chkconfig rcloned off</span><br><span class="line">rm -f /etc/init.d/rcloned</span><br></pre></td></tr></table></figure>

<h2 id="用Systemd-设置开机自启"><a href="#用Systemd-设置开机自启" class="headerlink" title="用Systemd 设置开机自启"></a>用Systemd 设置开机自启</h2><h3 id="新建"><a href="#新建" class="headerlink" title="新建"></a>新建</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano /etc/systemd/system/rclone-googledrive-mount.service</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=RClone Mount Service for Google Drive</span><br><span class="line">After=network-online.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=simple</span><br><span class="line">ExecStart=/usr/bin/rclone mount googledrive: /home/googledrive --allow-other --allow-non-empty --vfs-cache-mode writes</span><br><span class="line">Restart=on-failure</span><br><span class="line">RestartSec=10</span><br><span class="line">KillMode=process</span><br><span class="line">LimitNOFILE=4096</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>
<h4 id="命令说明-1"><a href="#命令说明-1" class="headerlink" title="命令说明"></a>命令说明</h4><ul>
<li><p>Description：服务的描述。</p>
</li>
<li><p>After：在哪些Systemd目标之后运行，这里设置为network-online.target以确保在网络连接可用后挂载。</p>
</li>
<li><p>User：替换为你的用户名。</p>
</li>
<li><p>ExecStart：替换为你的rclone mount命令及相关参数。</p>
</li>
<li><p>Restart：在服务失败时是否重新启动。</p>
</li>
<li><p>RestartSec：重新启动间隔时间（秒）。</p>
</li>
<li><p>KillMode：指定如何终止服务进程。</p>
</li>
<li><p>LimitNOFILE：打开的文件描述符限制。</p>
</li>
<li><p>请根据你的实际情况调整ExecStart和其他配置项。</p>
</li>
</ul>
<h3 id="启用Systemd服务"><a href="#启用Systemd服务" class="headerlink" title="启用Systemd服务"></a>启用Systemd服务</h3><ul>
<li>启用Systemd服务服务并在系统启动时自动运行它</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable rclone-googledrive-mount.service</span><br></pre></td></tr></table></figure>

<ul>
<li>启动Systemd服务：</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start rclone-googledrive-mount.service</span><br></pre></td></tr></table></figure>

<ul>
<li>检查服务状态以确保它正在运行：</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status rclone-googledrive-mount.service</span><br></pre></td></tr></table></figure>

<h2 id="打包整个bitwarden-data文件夹备份："><a href="#打包整个bitwarden-data文件夹备份：" class="headerlink" title="打包整个bitwarden_data文件夹备份："></a>打包整个bitwarden_data文件夹备份：</h2><p>本地新建一个sh文件：vaultwarden.sh 以下二选一</p>
<p>1、删除60天前的备份，删除临时文件 用于空间不足</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 本地挂载路径</span></span><br><span class="line">vaultwardenBackupDir=<span class="string">&quot;/home/jianguoyun/vaultwarden&quot;</span>  <span class="comment"># 上传备份的目标地址</span></span><br><span class="line"><span class="comment"># 备份的文件夹名</span></span><br><span class="line">backupFilePath=<span class="string">&quot;/home/vaultwarden&quot;</span>  <span class="comment"># 本地备份源地址</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 保留多少天之前的备份</span></span><br><span class="line">daysToKeep=60</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取当前日期</span></span><br><span class="line">currentDate=$(<span class="built_in">date</span> +<span class="string">&quot;%Y%m%d&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 计算需要删除的备份文件日期</span></span><br><span class="line">deleteDate=$(<span class="built_in">date</span> -d <span class="string">&quot;<span class="variable">$daysToKeep</span> days ago&quot;</span> +<span class="string">&quot;%Y%m%d&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除60天前的备份文件</span></span><br><span class="line"><span class="keyword">for</span> file <span class="keyword">in</span> <span class="variable">$&#123;vaultwardenBackupDir&#125;</span>/vaultwarden*.tar.gz</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    fileDate=$(<span class="built_in">basename</span> <span class="string">&quot;<span class="variable">$file</span>&quot;</span> | sed -n <span class="string">&#x27;s/vaultwarden\(.*\)\.tar\.gz/\1/p&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$fileDate</span>&quot;</span> -lt <span class="string">&quot;<span class="variable">$deleteDate</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;Deleting <span class="variable">$file</span>&quot;</span></span><br><span class="line">        <span class="built_in">rm</span> -rf <span class="string">&quot;<span class="variable">$file</span>&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 备份今天的文件到目标路径（上传到 Jianguoyun 或其他目标）</span></span><br><span class="line"><span class="keyword">if</span> tar -czvf <span class="string">&quot;<span class="variable">$&#123;vaultwardenBackupDir&#125;</span>/vaultwarden<span class="variable">$&#123;currentDate&#125;</span>.tar.gz&quot;</span> <span class="string">&quot;<span class="variable">$backupFilePath</span>&quot;</span>; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Backup for today created at <span class="variable">$&#123;vaultwardenBackupDir&#125;</span>/vaultwarden<span class="variable">$&#123;currentDate&#125;</span>.tar.gz&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Error: Failed to create backup for Vaultwarden!&quot;</span></span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果需要将备份也上传到其他路径（例如 Jianguoyun）</span></span><br><span class="line"><span class="keyword">if</span> tar -czvf <span class="string">&quot;<span class="variable">$&#123;jiangguoyunBackupDir&#125;</span>/vaultwarden<span class="variable">$&#123;currentDate&#125;</span>.tar.gz&quot;</span> <span class="string">&quot;<span class="variable">$backupFilePath</span>&quot;</span>; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Backup for today created at <span class="variable">$&#123;jiangguoyunBackupDir&#125;</span>/vaultwarden<span class="variable">$&#123;currentDate&#125;</span>.tar.gz&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Error: Failed to create backup for Jianguoyun!&quot;</span></span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<p>2、不定时删除，全部备份</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 本地挂载路径</span></span><br><span class="line">vaultwardenBackupDir=<span class="string">&quot;/home/jianguoyun/vaultwarden&quot;</span>  <span class="comment"># 上传备份的目标地址</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 备份的文件夹名</span></span><br><span class="line">backupFilePath=<span class="string">&quot;/home/vaultwarden&quot;</span>  <span class="comment"># 本地备份源地址</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取当前日期</span></span><br><span class="line">currentDate=$(<span class="built_in">date</span> +<span class="string">&quot;%Y%m%d&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 确保目标备份目录存在</span></span><br><span class="line"><span class="built_in">mkdir</span> -p <span class="string">&quot;<span class="variable">$vaultwardenBackupDir</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 备份今天的文件到目标路径（上传到 Jianguoyun 或其他目标）</span></span><br><span class="line"><span class="keyword">if</span> tar -czvf <span class="string">&quot;<span class="variable">$&#123;vaultwardenBackupDir&#125;</span>/vaultwarden<span class="variable">$&#123;currentDate&#125;</span>.tar.gz&quot;</span> <span class="string">&quot;<span class="variable">$backupFilePath</span>&quot;</span>; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Backup for today created at <span class="variable">$&#123;vaultwardenBackupDir&#125;</span>/vaultwarden<span class="variable">$&#123;currentDate&#125;</span>.tar.gz&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Error: Failed to create backup for Vaultwarden!&quot;</span></span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果需要将备份上传到其他路径，可以在这里添加上传逻辑</span></span><br><span class="line"><span class="comment"># 以下仅作为示例，上传到其他路径，修改为你的需求</span></span><br><span class="line"><span class="comment"># 如果没有额外上传需求，可以忽略这部分</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 例如上传到 Jianguoyun</span></span><br><span class="line">jiangguoyunBackupDir=<span class="string">&quot;/home/jianguoyun/vaultwarden&quot;</span>  <span class="comment"># 修改为正确的目标路径</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 确保目标上传目录存在</span></span><br><span class="line"><span class="built_in">mkdir</span> -p <span class="string">&quot;<span class="variable">$jiangguoyunBackupDir</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 备份今天的文件到 Jianguoyun 目标路径</span></span><br><span class="line"><span class="keyword">if</span> tar -czvf <span class="string">&quot;<span class="variable">$&#123;jiangguoyunBackupDir&#125;</span>/vaultwarden<span class="variable">$&#123;currentDate&#125;</span>.tar.gz&quot;</span> <span class="string">&quot;<span class="variable">$backupFilePath</span>&quot;</span>; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Backup for today uploaded to Jianguoyun at <span class="variable">$&#123;jiangguoyunBackupDir&#125;</span>/vaultwarden<span class="variable">$&#123;currentDate&#125;</span>.tar.gz&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Error: Failed to upload backup to Jianguoyun!&quot;</span></span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<h1 id="设置定时-备份"><a href="#设置定时-备份" class="headerlink" title="设置定时 备份"></a>设置定时 备份</h1><ul>
<li>打开终端</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crontab -e</span><br></pre></td></tr></table></figure>

<ul>
<li>设置定时</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># 6.30 备份一次</span></span></span><br><span class="line">30 */6 * * * ./vaultwarden.sh</span><br></pre></td></tr></table></figure>

<h1 id="上传坚果云"><a href="#上传坚果云" class="headerlink" title="上传坚果云"></a>上传坚果云</h1><h2 id="坚果云后端创建一个备份应用，点击进入-账户信息-安全选项，然后点击下面的添加应用，随便填写一个名字，然后复制生成的应用密码，最后在坚果云根目录下创建一个目录名为-vaultwarden-作为我们后续的同步文件夹"><a href="#坚果云后端创建一个备份应用，点击进入-账户信息-安全选项，然后点击下面的添加应用，随便填写一个名字，然后复制生成的应用密码，最后在坚果云根目录下创建一个目录名为-vaultwarden-作为我们后续的同步文件夹" class="headerlink" title="坚果云后端创建一个备份应用，点击进入 账户信息 - 安全选项，然后点击下面的添加应用，随便填写一个名字，然后复制生成的应用密码，最后在坚果云根目录下创建一个目录名为 vaultwarden 作为我们后续的同步文件夹"></a>坚果云后端创建一个备份应用，点击进入 <code>账户信息 - 安全选项</code>，然后点击下面的添加应用，随便填写一个名字，然后复制生成的应用密码，最后在坚果云根目录下创建一个目录名为 vaultwarden 作为我们后续的同步文件夹</h2><p><img src="https://cdn.jsdelivr.net/gh/oceanxux/imgs/image-20230503233857012.png"></p>
<h2 id="跟上面谷歌云一样的操作"><a href="#跟上面谷歌云一样的操作" class="headerlink" title="跟上面谷歌云一样的操作"></a>跟上面谷歌云一样的操作</h2><p><img src="https://cdn.jsdelivr.net/gh/oceanxux/imgs/image-20230503234114135.png"></p>
<h2 id="选对应的编号"><a href="#选对应的编号" class="headerlink" title="选对应的编号"></a>选对应的编号</h2><p><img src="https://cdn.jsdelivr.net/gh/oceanxux/imgs/image-20230503234406545.png"></p>
<h2 id="按顺序操作"><a href="#按顺序操作" class="headerlink" title="按顺序操作"></a>按顺序操作</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">配置webdav</span></span><br><span class="line">rclone config</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">新建</span></span><br><span class="line">n</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">创建webdav，数字可能会变动</span></span><br><span class="line">46</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">输入坚果云webdav地址</span></span><br><span class="line">https://dav.jianguoyun.com/dav/</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">输入webdav类型，这里选择5 其他</span></span><br><span class="line">5</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">输入坚果云的用户名</span></span><br><span class="line">xxx</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">选择密码类型，这里选y，自己输入密码</span></span><br><span class="line">y</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">输入坚果云生成的密码</span></span><br><span class="line">xxx</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">然后一路回车结束</span></span><br></pre></td></tr></table></figure>
<h2 id="挂载示例"><a href="#挂载示例" class="headerlink" title="挂载示例"></a>挂载示例</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[jiangguoyun]</span><br><span class="line">type = webdav</span><br><span class="line">url = https://dav.jianguoyun.com/dav/</span><br><span class="line">vendor = sharepoint-ntlm</span><br><span class="line">user = xxxx@gmail.com</span><br><span class="line">pass = xxxx</span><br></pre></td></tr></table></figure>
<h2 id="跟谷歌云盘一样"><a href="#跟谷歌云盘一样" class="headerlink" title="跟谷歌云盘一样"></a>跟谷歌云盘一样</h2><ul>
<li>新建目录</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir /home/vaultwarden</span><br></pre></td></tr></table></figure>

<ul>
<li>手动挂载</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rclone mount jiangguoyun:vaultwarden /home/vaultwarden --allow-other --allow-non-empty --vfs-cache-mode writes --daemon</span><br></pre></td></tr></table></figure>

<ul>
<li>或者</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rclone mount /root/.config/rclone/rclone.conf:jianguoyun:vaultwarden /home/vaultwarden --allow-other --allow-non-empty --vfs-cache-mode writes --daemon</span><br></pre></td></tr></table></figure>
<h2 id="手动查看是否正确"><a href="#手动查看是否正确" class="headerlink" title="手动查看是否正确"></a>手动查看是否正确</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /root/.config/rclone/rclone.conf</span><br></pre></td></tr></table></figure>

<h2 id="用Systemd设置开机自动挂载脚本"><a href="#用Systemd设置开机自动挂载脚本" class="headerlink" title="用Systemd设置开机自动挂载脚本"></a>用Systemd设置开机自动挂载脚本</h2><ul>
<li>创建 systemd 服务文件</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano /etc/systemd/system/rclone-jiangguoyun-mount.service</span><br></pre></td></tr></table></figure>

<ul>
<li>编辑服务文件</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=RClone Mount Service <span class="keyword">for</span> jiangguoyun</span><br><span class="line">After=network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=simple</span><br><span class="line">ExecStart=/usr/bin/rclone mount jiangguoyun:vaultwarden /home/vaultwarden --config /root/.config/rclone/rclone.conf --allow-other --allow-non-empty --vfs-cache-mode writes</span><br><span class="line">Restart=on-failure</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br><span class="line">```</span><br><span class="line"></span><br><span class="line">- 请确保配置文件路径和挂载命令适用于你的情况。这个示例假定你使用 /root/.config/rclone/rclone.conf 作为配置文件，将远程 jiangguoyun:vaultwarden 挂载到 /home/vaultwarden</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- 启动服务</span><br><span class="line"></span><br><span class="line">```bash</span><br><span class="line">systemctl start rclone-jiangguoyun-mount</span><br><span class="line">```</span><br><span class="line"></span><br><span class="line">- 创建新的服务</span><br><span class="line"></span><br><span class="line">```bash</span><br><span class="line">systemctl <span class="built_in">enable</span> rclone-jiangguoyun-mount</span><br><span class="line">```</span><br><span class="line"></span><br><span class="line">- 验证服务状态</span><br><span class="line"></span><br><span class="line">```bash</span><br><span class="line">systemctl status rclone-jiangguoyun-mount</span><br><span class="line">```</span><br></pre></td></tr></table></figure>

<h1 id="二合一备份脚本"><a href="#二合一备份脚本" class="headerlink" title="二合一备份脚本"></a>二合一备份脚本</h1><ul>
<li>nano &#x2F;home&#x2F;backup.sh</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">! /bin/bash</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">本地挂载路径</span></span><br><span class="line">vaultwardenBackupDir=/home/googledrive/vaultwarden/</span><br><span class="line">jiangguoyunBackupDir=/home/jiangguoyun/</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">备份的文件夹名</span></span><br><span class="line">backupFilePath=/home/vaultwarden/</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">保留多少天之前的备份</span></span><br><span class="line">daysToKeep=60</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">获取当前日期</span></span><br><span class="line">currentDate=$(date +&quot;%Y%m%d&quot;)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">计算需要删除的备份文件日期</span></span><br><span class="line">deleteDate=$(date -d &quot;$daysToKeep days ago&quot; +&quot;%Y%m%d&quot;)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">删除60天前的备份文件</span></span><br><span class="line">for file in $&#123;vaultwardenBackupDir&#125;/vaultwarden*.tar.gz</span><br><span class="line">do</span><br><span class="line">    fileDate=$(basename $file | sed -n &#x27;s/vaultwarden\(.*\)\.tar\.gz/\1/p&#x27;)</span><br><span class="line">    if [ &quot;$fileDate&quot; -lt &quot;$deleteDate&quot; ]; then</span><br><span class="line">        echo &quot;Deleting $file&quot;</span><br><span class="line">        rm -rf $file</span><br><span class="line">    fi</span><br><span class="line">done</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">备份今天的文件到googledrive</span></span><br><span class="line">tar -czvPf $&#123;vaultwardenBackupDir&#125;/vaultwarden$&#123;currentDate&#125;.tar.gz $backupFilePath</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">备份今天的文件到jiangguoyun</span></span><br><span class="line">tar -czvPf $&#123;jiangguoyunBackupDir&#125;/vaultwarden$&#123;currentDate&#125;.tar.gz $backupFilePath</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">## 文件上传</span></span></span><br><span class="line">rclone copy /home/backup gdrive:backup  # 本地路径 配置名字:网盘文件夹路径</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">## 文件下载</span></span></span><br><span class="line">rclone copy gdrive:backup /home/backup  # 配置名字:网盘文件夹路径 本地路径</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">## 新建文件夹</span></span></span><br><span class="line">rclone mkdir gdrive:backup              # 配置名字:网盘文件夹路径</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">## 获取文件夹大小</span></span></span><br><span class="line">rclone size gdrive:backup               # 配置名字:网盘文件夹路径</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">## 列表</span></span></span><br><span class="line">rclone ls gdrive:backup</span><br><span class="line">rclone lsl gdrive:backup # 比上面多一个显示上传时间</span><br><span class="line">rclone lsd gdrive:backup # 只显示文件夹</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">## 挂载</span></span></span><br><span class="line">rclone mount gdrive:mm /root/mm &amp;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">## 卸载</span></span></span><br><span class="line">fusermount -u  /root/mm</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">### 其他 ####</span></span></span><br><span class="line">rclone config - 以控制会话的形式添加rclone的配置，配置保存在.rclone.conf文件中。</span><br><span class="line">rclone copy - 将文件从源复制到目的地址，跳过已复制完成的。</span><br><span class="line">rclone sync - 将源数据同步到目的地址，只更新目的地址的数据。   –dry-run标志来检查要复制、删除的数据</span><br><span class="line">rclone move - 将源数据移动到目的地址,如果要在移动后删除空源目录，请加上 --delete-empty-src-d</span><br><span class="line">rclone delete - 删除指定路径下的文件内容。</span><br><span class="line">rclone purge - 清空指定路径下所有文件数据。</span><br><span class="line">rclone mkdir - 创建一个新目录。</span><br><span class="line">rclone rmdir - 删除空目录。</span><br><span class="line">rclone rmdirs - 删除指定灵境下的空目录。如果加上 --leave-root 参数，则不会删除根目录。</span><br><span class="line">rclone check - 检查源和目的地址数据是否匹配。</span><br><span class="line">rclone ls - 列出指定路径下所有的文件以及文件大小和路径。</span><br><span class="line">rclone lsd - 列出指定路径下所有的目录/容器/桶。</span><br><span class="line">rclone lsl - 列出指定路径下所有文件以及修改时间、文件大小和路径。</span><br><span class="line">rclone lsf - 列出指定路径下所有文件和目录</span><br><span class="line">rclone md5sum - 为指定路径下的所有文件产生一个md5sum文件。</span><br><span class="line">rclone sha1sum - 为指定路径下的所有文件产生一个sha1sum文件。</span><br><span class="line">rclone size - 获取指定路径下，文件内容的总大小。.</span><br><span class="line">rclone version - 查看当前版本。</span><br><span class="line">rclone cleanup - 清空remote。</span><br><span class="line">rclone dedupe - 交互式查找重复文件，进行删除/重命名操作。</span><br><span class="line">fusermount -qzu 挂载网盘的文件夹绝对路径 - 取消挂载网盘，不用了以后一定要取消哦。</span><br></pre></td></tr></table></figure>

<ul>
<li>完结</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://xx.6669998.xyz">sam🌸小窝</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://xx.6669998.xyz/post/145a70ad.html">https://xx.6669998.xyz/post/145a70ad.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://xx.6669998.xyz" target="_blank">sam🌸小窝</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Linux/">Linux</a><a class="post-meta__tags" href="/tags/docker/">docker</a></div><div class="post_share"><div class="social-share" data-image="https://tu.idcfq.com/imgs/2023/10/534b5589617cd93d.webp" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/post/ad99b136.html" title="备份Docker镜像到DockerHub"><img class="cover" src="https://image.6669998.xyz/BFHKbD.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">备份Docker镜像到DockerHub</div></div></a></div><div class="next-post pull-right"><a href="/post/4eb3381ab.html" title="Emby主题美化"><img class="cover" src="https://image.6669998.xyz/yoX2zQ.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Emby主题美化</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/post/4eb3381c.html" title="一键安装docker-常用命令"><img class="cover" src="https://image.6669998.xyz/5WgLOU.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-05-02</div><div class="title">一键安装docker-常用命令</div></div></a></div><div><a href="/post/a6a6908d.html" title="Linux 服务器常用命令"><img class="cover" src="https://image.6669998.xyz/TmH4dW.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-05-05</div><div class="title">Linux 服务器常用命令</div></div></a></div><div><a href="/post/22f0e0cb.html" title="caddy2 下载及使用"><img class="cover" src="https://image.6669998.xyz/p7c64F.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-07-19</div><div class="title">caddy2 下载及使用</div></div></a></div><div><a href="/post/bf1de88f.html" title="nginx 证书申请"><img class="cover" src="https://image.6669998.xyz/Ey2GmS.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-07-17</div><div class="title">nginx 证书申请</div></div></a></div><div><a href="/post/44f7c2ba.html" title="Multi-EasyGost一键脚本"><img class="cover" src="https://tu.idcfq.com/imgs/2023/10/05882490e930dc78.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-10-29</div><div class="title">Multi-EasyGost一键脚本</div></div></a></div><div><a href="/post/d3229ea8.html" title="VPS DD windows"><img class="cover" src="https://image.6669998.xyz/TQrGiT.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-08-21</div><div class="title">VPS DD windows</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://tu.idcfq.com/imgs/2024/02/5732d756934585ff.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">sam🌸小窝</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">50</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">19</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">24</div></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my note place</div></div><div class="xpand" style="height:200px;"><canvas class="illo" width="800" height="800" style="max-width: 200px; max-height: 200px; touch-action: none; width: 640px; height: 640px;"></canvas></div><script src="https://npm.elemecdn.com/ethan4116-blog/lib/js/other/two-people/twopeople1.js"></script><script src="https://npm.elemecdn.com/ethan4116-blog/lib/js/other/two-people/zdog.dist.js"></script><script id="rendered-js" src="https://npm.elemecdn.com/ethan4116-blog/lib/js/other/two-people/twopeople.js"></script><style>.card-widget.card-announcement {
  margin: 0;
  align-items: center;
  justify-content: center;
  text-align: center;
}
canvas {
  display: block;
  margin: 0 auto;
  cursor: move;
}</style><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%89%E8%A3%85docker"><span class="toc-number">1.</span> <span class="toc-text">安装docker</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8B%89%E5%8F%96%E9%95%9C%E5%83%8F"><span class="toc-number">1.1.</span> <span class="toc-text">拉取镜像</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E8%AF%B4%E6%98%8E"><span class="toc-number">1.2.</span> <span class="toc-text">命令说明</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8F%8D%E4%BB%A3%E5%9F%9F%E5%90%8D%E5%B9%B6%E5%BC%80%E5%90%AFhttps-%EF%BC%9Anginx-caddy-%E4%BA%8C%E9%80%89%E4%B8%80"><span class="toc-number">2.</span> <span class="toc-text">反代域名并开启https ：nginx  caddy 二选一</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#nginx"><span class="toc-number">2.1.</span> <span class="toc-text">nginx</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8"><span class="toc-number">2.1.1.</span> <span class="toc-text">设置开机启动</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1"><span class="toc-number">2.1.2.</span> <span class="toc-text">启动服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%81%9C%E6%AD%A2%E6%9C%8D%E5%8A%A1"><span class="toc-number">2.1.3.</span> <span class="toc-text">停止服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%8D%E6%96%B0%E5%8A%A0%E8%BD%BD"><span class="toc-number">2.1.4.</span> <span class="toc-text">重新加载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%9D%E5%AD%98%E5%B9%B6%E9%80%80%E5%87%BA%EF%BC%8C%E9%87%8D%E5%90%AFnginx%EF%BC%9A"><span class="toc-number">2.1.5.</span> <span class="toc-text">保存并退出，重启nginx：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A3%80%E6%9F%A5nginx-%E6%98%AF%E5%90%A6%E6%AD%A3%E7%A1%AE%EF%BC%9A"><span class="toc-number">2.1.6.</span> <span class="toc-text">检查nginx 是否正确：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#caddy"><span class="toc-number">2.2.</span> <span class="toc-text">caddy</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85caddy"><span class="toc-number">2.2.1.</span> <span class="toc-text">安装caddy</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%8F%8D%E4%BB%A3%E7%AB%AF%E5%8F%A3"><span class="toc-number">2.2.2.</span> <span class="toc-text">设置反代端口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E5%86%8C"><span class="toc-number">2.2.3.</span> <span class="toc-text">注册</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%B3%E9%97%AD%E6%B3%A8%E5%86%8C"><span class="toc-number">3.</span> <span class="toc-text">关闭注册</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B0%8F%E8%B4%B4%E5%A3%AB"><span class="toc-number">3.1.</span> <span class="toc-text">小贴士</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E5%AE%9A%E6%97%B6%E8%87%AA%E5%8A%A8%E4%B8%8A%E4%BC%A0"><span class="toc-number">4.</span> <span class="toc-text">配置定时自动上传</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B0%B7%E6%AD%8C%E4%BA%91%E7%9B%98"><span class="toc-number">4.1.</span> <span class="toc-text">谷歌云盘</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85rclone"><span class="toc-number">4.1.1.</span> <span class="toc-text">安装rclone</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B0%E5%BB%BA%E6%8C%82%E8%BD%BD"><span class="toc-number">4.1.2.</span> <span class="toc-text">新建挂载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%A0%E4%B8%BA%E6%96%B0%E7%89%88%E8%B0%B7%E6%AD%8C%E6%94%B9%E5%8F%98%E4%BA%86%E8%A7%84%E5%88%99-%E6%89%80%E4%BB%A5%E9%9C%80%E8%A6%81%E8%87%AA%E5%B7%B1%E5%8E%BB%E4%B8%8B%E8%BD%BD%E4%B8%80%E4%B8%AArclone-%E5%88%B0%E6%9C%AC%E5%9C%B0%E5%AE%89%E8%A3%85"><span class="toc-number">4.1.3.</span> <span class="toc-text">因为新版谷歌改变了规则 所以需要自己去下载一个rclone 到本地安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%93%E5%BC%80%E8%87%AA%E5%B7%B1%E7%9A%84%E7%94%B5%E8%84%91%E7%BB%88%E7%AB%AF%EF%BC%8C%E8%BF%9B%E5%85%A5%E5%88%B0%E6%AD%A4%E7%9B%AE%E5%BD%95%E5%90%8E%E6%89%A7%E8%A1%8C"><span class="toc-number">4.1.4.</span> <span class="toc-text">打开自己的电脑终端，进入到此目录后执行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%88%E6%9D%83%E6%88%90%E5%8A%9F%E4%BC%9A%E6%8F%90%E7%A4%BA%E5%A6%82%E4%B8%8B%EF%BC%9A"><span class="toc-number">4.1.5.</span> <span class="toc-text">授权成功会提示如下：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E6%9E%9C%E5%A4%B1%E8%B4%A5-%E5%8F%AF%E8%83%BD%E6%98%AF%E7%BD%91%E7%BB%9C%E9%97%AE%E9%A2%98%EF%BC%88windows-cmd-%E6%B2%A1%E5%8A%9E%E6%B3%95%E8%B5%B0%E4%BB%A3%E7%90%86%EF%BC%89"><span class="toc-number">4.1.6.</span> <span class="toc-text">如果失败 可能是网络问题（windows cmd 没办法走代理）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%8D%E5%88%B6%E6%8E%88%E6%9D%83-code%EF%BC%8C%E8%BE%93%E5%85%A5%E5%88%B0-rclone-%E4%B8%AD%E3%80%81%E6%8E%A5%E4%B8%8B%E6%9D%A5-rclone-%E4%BC%9A%E8%AF%A2%E9%97%AE%E6%98%AF%E5%90%A6%E4%B8%BA%E5%9B%A2%E9%98%9F%E7%9B%98"><span class="toc-number">4.1.7.</span> <span class="toc-text">复制授权 code，输入到 rclone 中、接下来 rclone 会询问是否为团队盘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A4%E6%97%B6%E9%85%8D%E7%BD%AE%E5%B0%B1%E5%B7%B2%E7%BB%8F%E7%BB%93%E6%9D%9F%E4%BA%86%EF%BC%8C%E9%80%80%E5%87%BA-clone%EF%BC%8C%E5%BC%80%E5%A7%8B%E6%8C%82%E8%BD%BD%E3%80%82"><span class="toc-number">4.1.8.</span> <span class="toc-text">此时配置就已经结束了，退出 clone，开始挂载。</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%82%E8%BD%BD-Google-Drive"><span class="toc-number">4.2.</span> <span class="toc-text">挂载 Google Drive</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A6%96%E5%85%88%E6%96%B0%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6%E5%A4%B9%E7%94%A8%E4%BA%8E%E6%8C%82%E8%BD%BD%EF%BC%9A"><span class="toc-number">4.2.1.</span> <span class="toc-text">首先新建一个文件夹用于挂载：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BC%80%E5%A7%8B%E6%8C%82%E8%BD%BD%EF%BC%88%E4%B8%A4%E7%A7%8D%E6%8C%82%E8%BD%BD%E6%96%B9%E6%B3%95-%E6%88%91%E9%80%89%E7%9A%84%E7%AC%AC%E4%B8%80-%EF%BC%89"><span class="toc-number">5.</span> <span class="toc-text">开始挂载（两种挂载方法 我选的第一 ）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%82%E8%BD%BD1"><span class="toc-number">5.1.</span> <span class="toc-text">挂载1</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8A%A5%E9%94%99%E4%BB%A5%E4%B8%8B%E5%8F%AF%E8%83%BD%E6%98%AF%E6%B2%A1%E5%AE%89%E8%A3%85fuse3"><span class="toc-number">5.1.1.</span> <span class="toc-text">报错以下可能是没安装fuse3</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%8C%E6%95%B4%E9%85%8D%E7%BD%AE%E5%A6%82%E4%B8%8B"><span class="toc-number">5.1.2.</span> <span class="toc-text">完整配置如下</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%82%E8%BD%BD-2"><span class="toc-number">5.2.</span> <span class="toc-text">挂载 2</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%84%B6%E5%90%8E%E8%BE%93%E5%85%A5-df-h-%E5%91%BD%E4%BB%A4"><span class="toc-number">5.3.</span> <span class="toc-text">然后输入 df -h 命令</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BC%80%E6%9C%BA%E8%87%AA%E5%8A%A8%E6%8C%82%E8%BD%BD-1-%E6%88%96%E8%80%85-2-%E9%80%89%E6%8B%A9"><span class="toc-number">6.</span> <span class="toc-text">开机自动挂载 1 或者 2 选择</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD%E5%B9%B6%E7%BC%96%E8%BE%91%E8%87%AA%E5%90%AF%E8%84%9A%E6%9C%AC"><span class="toc-number">6.1.</span> <span class="toc-text">下载并编辑自启脚本</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E5%86%85%E5%AE%B9%EF%BC%9A"><span class="toc-number">6.2.</span> <span class="toc-text">修改内容：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF"><span class="toc-number">6.3.</span> <span class="toc-text">设置开机自启</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%A1%E7%90%86"><span class="toc-number">6.4.</span> <span class="toc-text">管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%B8%E8%BD%BD%E8%87%AA%E5%8A%A8%E6%8C%82%E8%BD%BD"><span class="toc-number">6.5.</span> <span class="toc-text">卸载自动挂载</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8Systemd-%E8%AE%BE%E7%BD%AE%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF"><span class="toc-number">6.6.</span> <span class="toc-text">用Systemd 设置开机自启</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B0%E5%BB%BA"><span class="toc-number">6.6.1.</span> <span class="toc-text">新建</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E8%AF%B4%E6%98%8E-1"><span class="toc-number">6.6.1.1.</span> <span class="toc-text">命令说明</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%AF%E7%94%A8Systemd%E6%9C%8D%E5%8A%A1"><span class="toc-number">6.6.2.</span> <span class="toc-text">启用Systemd服务</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%93%E5%8C%85%E6%95%B4%E4%B8%AAbitwarden-data%E6%96%87%E4%BB%B6%E5%A4%B9%E5%A4%87%E4%BB%BD%EF%BC%9A"><span class="toc-number">6.7.</span> <span class="toc-text">打包整个bitwarden_data文件夹备份：</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%AE%9A%E6%97%B6-%E5%A4%87%E4%BB%BD"><span class="toc-number">7.</span> <span class="toc-text">设置定时 备份</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%8A%E4%BC%A0%E5%9D%9A%E6%9E%9C%E4%BA%91"><span class="toc-number">8.</span> <span class="toc-text">上传坚果云</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9D%9A%E6%9E%9C%E4%BA%91%E5%90%8E%E7%AB%AF%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%A4%87%E4%BB%BD%E5%BA%94%E7%94%A8%EF%BC%8C%E7%82%B9%E5%87%BB%E8%BF%9B%E5%85%A5-%E8%B4%A6%E6%88%B7%E4%BF%A1%E6%81%AF-%E5%AE%89%E5%85%A8%E9%80%89%E9%A1%B9%EF%BC%8C%E7%84%B6%E5%90%8E%E7%82%B9%E5%87%BB%E4%B8%8B%E9%9D%A2%E7%9A%84%E6%B7%BB%E5%8A%A0%E5%BA%94%E7%94%A8%EF%BC%8C%E9%9A%8F%E4%BE%BF%E5%A1%AB%E5%86%99%E4%B8%80%E4%B8%AA%E5%90%8D%E5%AD%97%EF%BC%8C%E7%84%B6%E5%90%8E%E5%A4%8D%E5%88%B6%E7%94%9F%E6%88%90%E7%9A%84%E5%BA%94%E7%94%A8%E5%AF%86%E7%A0%81%EF%BC%8C%E6%9C%80%E5%90%8E%E5%9C%A8%E5%9D%9A%E6%9E%9C%E4%BA%91%E6%A0%B9%E7%9B%AE%E5%BD%95%E4%B8%8B%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%9B%AE%E5%BD%95%E5%90%8D%E4%B8%BA-vaultwarden-%E4%BD%9C%E4%B8%BA%E6%88%91%E4%BB%AC%E5%90%8E%E7%BB%AD%E7%9A%84%E5%90%8C%E6%AD%A5%E6%96%87%E4%BB%B6%E5%A4%B9"><span class="toc-number">8.1.</span> <span class="toc-text">坚果云后端创建一个备份应用，点击进入 账户信息 - 安全选项，然后点击下面的添加应用，随便填写一个名字，然后复制生成的应用密码，最后在坚果云根目录下创建一个目录名为 vaultwarden 作为我们后续的同步文件夹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B7%9F%E4%B8%8A%E9%9D%A2%E8%B0%B7%E6%AD%8C%E4%BA%91%E4%B8%80%E6%A0%B7%E7%9A%84%E6%93%8D%E4%BD%9C"><span class="toc-number">8.2.</span> <span class="toc-text">跟上面谷歌云一样的操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%89%E5%AF%B9%E5%BA%94%E7%9A%84%E7%BC%96%E5%8F%B7"><span class="toc-number">8.3.</span> <span class="toc-text">选对应的编号</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%89%E9%A1%BA%E5%BA%8F%E6%93%8D%E4%BD%9C"><span class="toc-number">8.4.</span> <span class="toc-text">按顺序操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%82%E8%BD%BD%E7%A4%BA%E4%BE%8B"><span class="toc-number">8.5.</span> <span class="toc-text">挂载示例</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B7%9F%E8%B0%B7%E6%AD%8C%E4%BA%91%E7%9B%98%E4%B8%80%E6%A0%B7"><span class="toc-number">8.6.</span> <span class="toc-text">跟谷歌云盘一样</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%8B%E5%8A%A8%E6%9F%A5%E7%9C%8B%E6%98%AF%E5%90%A6%E6%AD%A3%E7%A1%AE"><span class="toc-number">8.7.</span> <span class="toc-text">手动查看是否正确</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8Systemd%E8%AE%BE%E7%BD%AE%E5%BC%80%E6%9C%BA%E8%87%AA%E5%8A%A8%E6%8C%82%E8%BD%BD%E8%84%9A%E6%9C%AC"><span class="toc-number">8.8.</span> <span class="toc-text">用Systemd设置开机自动挂载脚本</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E5%90%88%E4%B8%80%E5%A4%87%E4%BB%BD%E8%84%9A%E6%9C%AC"><span class="toc-number">9.</span> <span class="toc-text">二合一备份脚本</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-number">10.</span> <span class="toc-text">常用命令</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/post/53b5b3b3.html" title="GitHub 文件加速"><img src="https://image.6669998.xyz/60jLfo.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="GitHub 文件加速"/></a><div class="content"><a class="title" href="/post/53b5b3b3.html" title="GitHub 文件加速">GitHub 文件加速</a><time datetime="2025-02-20T09:30:38.000Z" title="发表于 2025-02-20 17:30:38">2025-02-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/a7200dc1.html" title="ESTK Esim"><img src="https://tu.idcfq.com/imgs/2023/10/9cf901837fc84de7.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ESTK Esim"/></a><div class="content"><a class="title" href="/post/a7200dc1.html" title="ESTK Esim">ESTK Esim</a><time datetime="2024-09-05T14:13:26.000Z" title="发表于 2024-09-05 22:13:26">2024-09-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/6d918a08.html" title="Emby 302 实现丝滑观影"><img src="https://image.6669998.xyz/UnusfU.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Emby 302 实现丝滑观影"/></a><div class="content"><a class="title" href="/post/6d918a08.html" title="Emby 302 实现丝滑观影">Emby 302 实现丝滑观影</a><time datetime="2024-08-04T13:01:52.000Z" title="发表于 2024-08-04 21:01:52">2024-08-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/e17a6bb1.html" title="Free mailbox"><img src="https://image.6669998.xyz/euJCys.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Free mailbox"/></a><div class="content"><a class="title" href="/post/e17a6bb1.html" title="Free mailbox">Free mailbox</a><time datetime="2024-07-26T03:07:15.000Z" title="发表于 2024-07-26 11:07:15">2024-07-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/bf1de88f.html" title="nginx 证书申请"><img src="https://image.6669998.xyz/Ey2GmS.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="nginx 证书申请"/></a><div class="content"><a class="title" href="/post/bf1de88f.html" title="nginx 证书申请">nginx 证书申请</a><time datetime="2024-07-17T13:10:21.000Z" title="发表于 2024-07-17 21:10:21">2024-07-17</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2025  <i id="heartbeat" class="fa fas fa-heartbeat"></i> sam🌸小窝</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div><link rel="stylesheet" href="https://fastly.jsdelivr.net/gh/HCLonely/images@master/others/heartbeat.min.css"></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div class="js-pjax" id="rightMenu"><div class="rightMenu-group rightMenu-small"><a class="rightMenu-item" href="javascript:window.history.back();"><i class="fa fa-arrow-left"></i></a><a class="rightMenu-item" href="javascript:window.history.forward();"><i class="fa fa-arrow-right"></i></a><a class="rightMenu-item" href="javascript:window.location.reload();"><i class="fa fa-refresh"></i></a><a class="rightMenu-item" href="javascript:rmf.scrollToTop();"><i class="fa fa-arrow-up"></i></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-text"><a class="rightMenu-item" href="javascript:rmf.copySelect();"><i class="fa fa-copy"></i><span>复制</span></a><a class="rightMenu-item" href="javascript:window.open(&quot;https://www.baidu.com/s?wd=&quot;+window.getSelection().toString());window.location.reload();"><i class="fa fa-search"></i><span>百度搜索</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" href="/archives/"><i class="fa-solid fa-archive"></i><span>文章归档</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="fa-solid fa-folder-open"></i><span>文章分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="fa-solid fa-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-to"><a class="rightMenu-item" href="javascript:rmf.copyWordsLink()"><i class="fa fa-link"></i><span>复制本文地址</span></a><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()"><i class="fa fa-window-restore"></i><span>新窗口打开</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-img"><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()"><i class="fa fa-window-restore"></i><span>在新窗口打开</span></a></div><div class="rightMenu-group rightMenu-line"><a class="rightMenu-item menu-link" id="menu-radompage" href="javascript:toRandomPost();"><i class="fa-solid fa-shoe-prints"></i><span>随便逛逛</span></a><a class="rightMenu-item" href="javascript:rmf.switchDarkMode();"><i class="fa fa-moon"></i><span>昼夜切换</span></a><a class="rightMenu-item" href="javascript:rmf.translate();"><i class="fa-solid fa-earth-asia"></i><span>繁简转换</span></a></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"><script>(()=>{
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://twikoo.6669998.xyz/',
      region: '',
      onCommentLoaded: function () {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo.6669998.xyz/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(function (res) {
      countELement.innerText = res[0].count
    }).catch(function (err) {
      console.error(err);
    });
  }

  const runFn = () => {
    init()
    GLOBAL_CONFIG_SITE.isPost && getCount()
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') {
      setTimeout(runFn,0)
      return
    } 
    getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(runFn)
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = () => {
      loadTwikoo()
    }
  }
})()</script></div><script src="/js/snowflake.js"></script><script defer src="https://npm.elemecdn.com/jquery@latest/dist/jquery.min.js"></script><script defer src="/js/rightMenu.js"></script><script src="/sam/random.js"></script><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="true" data-click="true"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div><!-- hexo injector body_end start --><div class="js-pjax"><script async="async">var arr = document.getElementsByClassName('recent-post-item');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '2s');
    arr[i].setAttribute('data-wow-delay', '1s');
    arr[i].setAttribute('data-wow-offset', '100');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script><script async="async">var arr = document.getElementsByClassName('card-widget');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '');
    arr[i].setAttribute('data-wow-delay', '');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script></div><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow.min.js"></script><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow_init.js"></script><!-- hexo injector body_end end --></body></html>